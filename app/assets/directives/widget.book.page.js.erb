app.widget.directive('page', function() {
  return {
    // TODO: detect HTML4 / HTML5
    restrict: 'E',
    templateUrl: '<%= asset_path "html4/_book.page.html"  %>',
    replace: true,
    scope: {
      data: '=placeholder'
    },
    controller: function($scope) {
      $scope.view = function() {
        $scope.$emit('view', $scope.data.articleId);
      };
      $scope.thumbUp = function() {
        $scope.data.isThumbUp = !$scope.data.isThumbUp;
        $scope.data.isThumbDown = false;
//      Article.thumbUp($scope.data.id)        
      };
      $scope.thumbDown = function() {
        $scope.data.isThumbUp = false;
        $scope.data.isThumbDown = !$scope.data.isThumbDown;
//      Article.thumbDown($scope.data.id)        
      };
      $scope.subscribe = function(object, type) {
        $scope.$emit('subscribe', { type: type, id: object.id });
      };
      $scope.block = function() {
      };
      $scope.bookmark = function() {
      };
      $scope.share = function() {
      };
    },
    compile: function(element, attrs) {
      var $element = $(element);
      $element.addClass('page');
      $element.width($element.width() / 2);
      $element.height($element.parent().height());
      $element.css({
        float: 'left',
        position: 'absolute',
        overflow: 'hidden'
      });
    }
  }
});
