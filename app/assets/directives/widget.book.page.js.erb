app.widget.directive('page', function() {
  return {
    // TODO: detect HTML4 / HTML5
    restrict: 'E',
    replace: true,
    templateUrl: '<%= asset_path "html4/_book.page.html"  %>',
    scope: {
      data: '=placeholder'
    },
    controller: function($scope, $location) {
      $scope.view = function() {
      };
      $scope.thumbUp = function() {
        $scope.data.isThumbUp = !$scope.data.isThumbUp;
        $scope.data.isThumbDown = false;
//      Article.thumbUp($scope.data.id)        
      };
      $scope.thumbDown = function() {
        $scope.data.isThumbUp = false;
        $scope.data.isThumbDown = !$scope.data.isThumbDown;
//      Article.thumbDown($scope.data.id)        
      };
      $scope.subscribe = function(object, type) {
        $location.path('/magazines/new').search({ 'type': type, 'id': object.id });
      };
      $scope.block = function() {
      };
      $scope.bookmark = function() {
      };
      $scope.share = function() {
      };
    },
    compile: function(element, attrs) {
      var $element = $(element);
      $element.addClass('page');
      $element.width($element.width() / 2);
      $element.height($element.parent().height());
      $element.css('float', 'left');
      $element.css('position', 'absolute');
      $element.css('overflow', 'hidden');
    }
  }
});
