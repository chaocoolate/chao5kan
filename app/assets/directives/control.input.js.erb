app.control.directive('default', function() {
  var DOM = {
    init: function(input) {
      $input = $(input);
      $label = $('<label>' + $input.attr('default') + '</label>')
      $input.css('position', 'absolute');
      $input.css('z-index', 10);
      $input.outerWidth($input.parent().outerWidth());
      $input.parent().outerHeight($input.outerHeight());
      $label.innerHeight($input.innerHeight());
      $label.css('padding-top', $input.css('padding-top'));
      $label.css('padding-left', $input.css('padding-left'));
      $label.css('font-size', $input.css('font-size'));
      $label.css('font-weight', $input.css('font-weight'));
      $input.after($label);
      return { input: $input, label: $label };
    }
  }
  return {
    restrict: 'A',
    scope: { value:'=ngModel' },
    controller: function($scope) {
      $scope.isEmpty = function(value) {
        $scope.label.css('opacity', value ? 0 : 0.5);
      };
      $scope.update = function(value) {
        $scope.value = value
      };
    },
    compile: function(element, attrs) {
      var $div = DOM.init(element);
      return function link(scope, element) {
        scope.label = $div.label;
        scope.$watch('value', scope.isEmpty);
        // NOTE: Update the scope thro this way seperately
        scope.$watch($div.input.attr('ng-model'), scope.update);
      }
    }
  }
});




// app.control.directive('testing', function() {
//   return {
//     restrict: 'A',
//     scope: { value:'=ngModel' },
//     controller: function($scope) {
//       $scope.isEmpty = function(data) {
//       };
//       $scope.foo = function(data) {
//         $scope.value = data
//       };
//     },
//      compile: function(element, attrs) {
//        return function link(scope, element, attrs) {
//          scope.$watch('value', scope.isEmpty)
//          scope.$watch($(element).attr('ng-model'), scope.foo)
// // //        scope.$watch(element.value, scope.foo)
//        }
//      }
//   }
// })
